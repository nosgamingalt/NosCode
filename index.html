<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOS Code - AI-Powered Code Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/vs2015.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/ace.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Activity Bar (VS Code left icon bar) -->
        <div class="activity-bar">
            <div class="activity-bar-top">
                <button class="activity-icon active" id="activity-explorer" title="Explorer (Ctrl+Shift+E)">
                    <i class="fas fa-copy"></i>
                </button>
                <button class="activity-icon" id="activity-search" title="Search (Ctrl+Shift+F)">
                    <i class="fas fa-search"></i>
                </button>
                <button class="activity-icon" id="activity-git" title="Source Control (Ctrl+Shift+G)">
                    <i class="fas fa-code-branch"></i>
                </button>
            </div>
            <div class="activity-bar-bottom">
                <button class="activity-icon" id="activity-ai" title="Toggle AI Panel">
                    <i class="fas fa-robot"></i>
                </button>
                <button class="activity-icon" id="activity-settings" title="Settings">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>

        <!-- Primary Sidebar -->
        <div class="sidebar" id="sidebar">
            <!-- Explorer Panel -->
            <div class="sidebar-panel active" id="panel-explorer">
                <div class="sidebar-header">
                    <span class="sidebar-title">EXPLORER</span>
                    <div class="sidebar-actions">
                        <button class="icon-btn" id="btn-new-file" title="New File">
                            <i class="fas fa-file-medical"></i>
                        </button>
                        <button class="icon-btn" id="btn-new-folder" title="New Folder">
                            <i class="fas fa-folder-plus"></i>
                        </button>
                        <button class="icon-btn" id="btn-refresh" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Project Section -->
                <div class="sidebar-section">
                    <div class="section-header collapsible" onclick="toggleSection('projects')">
                        <i class="fas fa-chevron-down section-chevron" id="chevron-projects"></i>
                        <span>OPEN PROJECTS</span>
                    </div>
                    <div class="section-content" id="section-projects">
                        <div id="projects-list" class="tree-view"></div>
                        <button class="btn-action" id="btn-open-project">
                            <i class="fas fa-folder-open"></i> Open Project
                        </button>
                    </div>
                </div>

                <!-- Files Section -->
                <div class="sidebar-section">
                    <div class="section-header collapsible" onclick="toggleSection('files')">
                        <i class="fas fa-chevron-down section-chevron" id="chevron-files"></i>
                        <span id="files-section-title">NO FOLDER OPENED</span>
                    </div>
                    <div class="section-content" id="section-files">
                        <div id="breadcrumb-nav" class="breadcrumb"></div>
                        <div id="files-list" class="tree-view"></div>
                    </div>
                </div>
            </div>

            <!-- Search Panel -->
            <div class="sidebar-panel" id="panel-search">
                <div class="sidebar-header">
                    <span class="sidebar-title">SEARCH</span>
                </div>
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search-input" placeholder="Search" />
                    </div>
                    <div id="search-results" class="search-results"></div>
                </div>
            </div>

            <!-- Git Panel -->
            <div class="sidebar-panel" id="panel-git">
                <div class="sidebar-header">
                    <span class="sidebar-title">SOURCE CONTROL</span>
                </div>
                <div class="git-container">
                    <p class="muted-text">Source control features coming soon.</p>
                </div>
            </div>
        </div>

        <!-- Resize Handle for Sidebar -->
        <div class="resize-handle" id="sidebar-resize"></div>

        <!-- Main Editor Area -->
        <div class="main-area">
            <!-- Editor Tabs Bar -->
            <div class="tabs-bar">
                <div class="tabs-container" id="editor-tabs">
                    <div class="tab-placeholder">
                        <span>Open a file to start editing</span>
                    </div>
                </div>
                <div class="tabs-actions">
                    <button class="icon-btn" id="btn-split-editor" title="Split Editor Right">
                        <i class="fas fa-columns"></i>
                    </button>
                </div>
            </div>

            <!-- Breadcrumb Navigation -->
            <div class="editor-breadcrumb" id="editor-breadcrumb">
                <span class="breadcrumb-item">No file selected</span>
            </div>

            <!-- Editor Content Area -->
            <div class="editor-wrapper">
                <div class="editor-area" id="editor-area">
                    <div id="editor" class="ace-editor"></div>
                    
                    <!-- Welcome Screen -->
                    <div id="welcome-screen" class="welcome-screen">
                        <div class="welcome-content">
                            <div class="welcome-logo">
                                <i class="fas fa-code"></i>
                            </div>
                            <h1>NOS Code</h1>
                            <p class="welcome-subtitle">AI-Powered Code Editor</p>
                            
                            <div class="welcome-actions">
                                <button class="welcome-btn primary" onclick="document.getElementById('project-modal').classList.add('active'); loadProjectList();">
                                    <i class="fas fa-folder-open"></i>
                                    Open Project
                                </button>
                                <button class="welcome-btn" onclick="document.getElementById('project-modal').classList.add('active');">
                                    <i class="fas fa-plus"></i>
                                    New Project
                                </button>
                            </div>

                            <div class="welcome-shortcuts">
                                <h3>Keyboard Shortcuts</h3>
                                <div class="shortcut-grid">
                                    <div class="shortcut"><kbd>Ctrl</kbd>+<kbd>S</kbd><span>Save File</span></div>
                                    <div class="shortcut"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>E</kbd><span>Explorer</span></div>
                                    <div class="shortcut"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>F</kbd><span>Search</span></div>
                                    <div class="shortcut"><kbd>Ctrl</kbd>+<kbd>`</kbd><span>Terminal</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom Panel (Terminal) -->
                <div class="bottom-panel" id="bottom-panel">
                    <div class="resize-handle-horizontal" id="bottom-panel-resize"></div>
                    <div class="bottom-panel-header">
                        <div class="bottom-panel-tabs">
                            <button class="bottom-tab active" data-panel="terminal">
                                <i class="fas fa-terminal"></i> Terminal
                            </button>
                            <button class="bottom-tab" data-panel="output">
                                <i class="fas fa-list"></i> Output
                            </button>
                            <button class="bottom-tab" data-panel="problems">
                                <i class="fas fa-exclamation-circle"></i> Problems
                            </button>
                        </div>
                        <div class="bottom-panel-actions">
                            <button class="icon-btn" id="btn-clear-terminal" title="Clear Terminal">
                                <i class="fas fa-trash"></i>
                            </button>
                            <button class="icon-btn" id="btn-maximize-panel" title="Maximize Panel">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                            <button class="icon-btn" id="btn-close-panel" title="Close Panel">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Terminal Content -->
                    <div class="bottom-panel-content active" id="terminal-panel">
                        <div class="terminal-output" id="terminal-output">
                            <div class="terminal-welcome">
                                <span class="terminal-green">NOS Code Terminal</span> - Type 'help' for commands
                            </div>
                        </div>
                        <div class="terminal-input-line">
                            <span class="terminal-prompt">$</span>
                            <input type="text" id="terminal-input" placeholder="Enter command..." />
                        </div>
                    </div>

                    <!-- Output Content -->
                    <div class="bottom-panel-content" id="output-panel">
                        <div class="output-area" id="output-area">
                            <p class="muted-text">No output</p>
                        </div>
                    </div>

                    <!-- Problems Content -->
                    <div class="bottom-panel-content" id="problems-panel">
                        <div class="problems-area" id="problems-area">
                            <p class="muted-text">No problems detected</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Status Bar -->
            <div class="status-bar">
                <div class="status-left">
                    <span class="status-item clickable" id="status-project" onclick="document.getElementById('project-modal').classList.add('active'); loadProjectList();">
                        <i class="fas fa-folder"></i> <span id="status-project-name">No project</span>
                    </span>
                    <span class="status-item">
                        <i class="fas fa-code-branch"></i> main
                    </span>
                </div>
                <div class="status-center">
                    <span class="status-item" id="status-message"></span>
                </div>
                <div class="status-right">
                    <span class="status-item" id="status-cursor">Ln 1, Col 1</span>
                    <span class="status-item">UTF-8</span>
                    <span class="status-item" id="status-language">Plain Text</span>
                    <span class="status-item">Spaces: 4</span>
                </div>
            </div>
        </div>

        <!-- Resize Handle for AI Panel -->
        <div class="resize-handle" id="ai-panel-resize"></div>

        <!-- AI Assistant Panel (Right Side) -->
        <div class="ai-panel" id="ai-panel">
            <div class="ai-panel-header">
                <div class="ai-panel-title">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                </div>
                <div class="ai-panel-actions">
                    <button class="icon-btn" id="btn-clear-chat" title="Clear Chat">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="icon-btn" id="btn-toggle-ai-panel" title="Close Panel">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- AI Mode Tabs -->
            <div class="ai-mode-tabs">
                <button class="ai-mode-tab active" data-mode="chat">
                    <i class="fas fa-comments"></i> Chat
                </button>
                <button class="ai-mode-tab" data-mode="edit">
                    <i class="fas fa-wand-magic-sparkles"></i> Edit
                </button>
                <button class="ai-mode-tab" data-mode="generate">
                    <i class="fas fa-code"></i> Generate
                </button>
            </div>

            <!-- Chat Messages Area -->
            <div class="ai-chat-area" id="ai-chat-area">
                <div class="ai-welcome-message">
                    <div class="ai-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="ai-message-content">
                        <strong>AI Assistant</strong>
                        <p>Hello! I'm your AI coding assistant. I can help you:</p>
                        <ul>
                            <li><strong>Create files</strong> - "Create index.html with a navigation bar"</li>
                            <li><strong>Edit code</strong> - "Add a login function to auth.js"</li>
                            <li><strong>Explain code</strong> - "Explain this function"</li>
                            <li><strong>Debug</strong> - "Why is this code not working?"</li>
                        </ul>
                        <p class="ai-tip"><i class="fas fa-lightbulb"></i> Tip: I'll write code directly to your files instead of showing it in chat!</p>
                    </div>
                </div>
            </div>

            <!-- AI Input Area -->
            <div class="ai-input-area">
                <div class="ai-context-indicator" id="ai-context">
                    <i class="fas fa-file-code"></i>
                    <span id="ai-context-file">No file selected</span>
                </div>
                <div class="ai-image-preview" id="ai-image-preview" style="display: none;">
                    <img id="ai-preview-img" src="" alt="Attached image">
                    <button class="remove-image-btn" id="btn-remove-image" title="Remove image">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="ai-input-wrapper">
                    <input type="file" id="ai-image-input" accept="image/*" style="display: none;">
                    <button class="ai-attach-btn" id="btn-attach-image" title="Attach image">
                        <i class="fas fa-image"></i>
                    </button>
                    <textarea 
                        id="ai-input" 
                        placeholder="Ask me anything or tell me what to create/edit..."
                        rows="1"
                    ></textarea>
                    <button class="ai-send-btn" id="btn-send-ai">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="ai-quick-actions">
                    <button class="quick-action-btn" data-action="explain">
                        <i class="fas fa-book"></i> Explain
                    </button>
                    <button class="quick-action-btn" data-action="optimize">
                        <i class="fas fa-bolt"></i> Optimize
                    </button>
                    <button class="quick-action-btn" data-action="fix">
                        <i class="fas fa-bug"></i> Fix Bugs
                    </button>
                    <button class="quick-action-btn" data-action="document">
                        <i class="fas fa-file-alt"></i> Document
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Project Modal -->
    <div class="modal" id="project-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-folder-plus"></i> Projects</h3>
                <button class="modal-close" onclick="this.closest('.modal').classList.remove('active')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <input type="text" id="project-name-input" placeholder="Enter project name...">
                    <button class="btn-primary" id="btn-create-project">
                        <i class="fas fa-plus"></i> Create
                    </button>
                </div>
                <div class="divider"><span>or select existing</span></div>
                <div class="project-list" id="project-list"></div>
            </div>
        </div>
    </div>

    <!-- File Modal -->
    <div class="modal" id="file-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-file-medical"></i> New File</h3>
                <button class="modal-close" onclick="this.closest('.modal').classList.remove('active')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <input type="text" id="file-name-input" placeholder="filename.js">
                    <button class="btn-primary" id="btn-create-file">
                        <i class="fas fa-check"></i> Create
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Folder Modal -->
    <div class="modal" id="folder-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-folder-plus"></i> New Folder</h3>
                <button class="modal-close" onclick="this.closest('.modal').classList.remove('active')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <input type="text" id="folder-name-input" placeholder="folder-name">
                    <button class="btn-primary" id="btn-create-folder">
                        <i class="fas fa-check"></i> Create
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Dialog -->
    <div class="dialog-overlay" id="dialog-overlay"></div>
    <div class="custom-dialog" id="custom-dialog">
        <div class="dialog-header">
            <span class="dialog-title" id="dialog-title">Confirm</span>
        </div>
        <div class="dialog-body">
            <p class="dialog-message" id="dialog-message"></p>
            <input type="text" id="dialog-input" class="dialog-input" style="display: none;">
        </div>
        <div class="dialog-footer" id="dialog-buttons"></div>
    </div>

    <!-- Command Palette -->
    <div class="command-palette-overlay" id="command-palette-overlay"></div>
    <div class="command-palette" id="command-palette">
        <div class="command-input-wrapper">
            <i class="fas fa-search"></i>
            <input type="text" id="command-input" placeholder="Type a command or search...">
        </div>
        <div class="command-list" id="command-list"></div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-html.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-jsx.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-csharp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-sql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-php.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-ruby.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-golang.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/mode-markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/theme-one_dark.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.30.0/ext-language_tools.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
